  <!DOCTYPE html>
  <html>
  	<head>
		<title>Five Nights at Femboy Hooters</title>
		<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto+Mono&display=swap" rel="stylesheet">
		<style>
			*{
				overflow: hidden;
				user-select: none;
			/* 	image-rendering: pixelated; */
			}
			body{
				background-color: black;
			}
			.font{
				font-family: "Roboto Mono";
				color: white;
			}
			#title{
				font-size: 8vmin;
				padding-left: 8vmin;
			}
			#controls{
				position: fixed;
				right: 5vmin;
				top: 5vmin;
				text-align: right;
				font-size: 4vmin;
			}
			#start{
				font-size: 8vmin;
				padding-left: 8vmin;
				margin-top: 10vmin;
				cursor: pointer;
				z-index: 3;
				position: relative;
			}
			#continue{
				font-size: 8vmin;
				padding-left: 8vmin;
				margin-top: 10vmin;
				cursor: pointer;
				z-index: 3;
				position: relative;
				display: none;
			}
			#static{
				position: fixed;
				top: 0;
				left: 0;
				height: 100vh;
				width: 100vw;
				background: url("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/cdb6ceaf-da99-4ba4-a511-7810190e4182/dd2760y-f2ccd6f3-daa3-44b4-a35d-3bf1996ee454.gif?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOiIsImlzcyI6InVybjphcHA6Iiwib2JqIjpbW3sicGF0aCI6IlwvZlwvY2RiNmNlYWYtZGE5OS00YmE0LWE1MTEtNzgxMDE5MGU0MTgyXC9kZDI3NjB5LWYyY2NkNmYzLWRhYTMtNDRiNC1hMzVkLTNiZjE5OTZlZTQ1NC5naWYifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6ZmlsZS5kb3dubG9hZCJdfQ.N317YayhCrpzZCR8zlTz-XOpWnbvEmHJJrsx1qZrgic");
				background-size: cover;
				mix-blend-mode: lighten;
				z-index: 2;
				opacity: 0.5;
			}
			#static2{
				position: fixed;
				top: 0;
				left: 0;
				height: 100vh;
				width: 100vw;
				background: url("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/cdb6ceaf-da99-4ba4-a511-7810190e4182/dd2760y-f2ccd6f3-daa3-44b4-a35d-3bf1996ee454.gif?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOiIsImlzcyI6InVybjphcHA6Iiwib2JqIjpbW3sicGF0aCI6IlwvZlwvY2RiNmNlYWYtZGE5OS00YmE0LWE1MTEtNzgxMDE5MGU0MTgyXC9kZDI3NjB5LWYyY2NkNmYzLWRhYTMtNDRiNC1hMzVkLTNiZjE5OTZlZTQ1NC5naWYifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6ZmlsZS5kb3dubG9hZCJdfQ.N317YayhCrpzZCR8zlTz-XOpWnbvEmHJJrsx1qZrgic");
				background-size: cover;
				z-index: 100002;
				opacity: 0.2;
			}
			#flashlight{
				position: fixed;
				top: 0;
				left: 0;
				height: 100vh;
				width: 100vw;
				background: url("https://steamuserimages-a.akamaihd.net/ugc/518260088829666633/E43F9AC42907CA4FE82849F0DFB15CB48F136177/?imw=637&imh=358&ima=fit&impolicy=Letterbox&imcolor=%23000000&letterbox=true");
				background-size: cover;
				background-position: center;
				mix-blend-mode: multiply;
				z-index: 100001;
				transform: scale(1);
			}
			#flashlight.off{
				background: black;
				opacity: 0.95;
			}
			#screen{
				position: fixed;
				top: 0;
				left: -200vw;
				height: 100vh;
				width: 500vw;
				background-size: contain;
				background-position: center;
				background-repeat: no-repeat;
				z-index: 1;
				filter: grayscale(0.8) contrast(0.8);
			}
			#map{
				position: fixed;
				right: 0;
				bottom: 0;
				z-index: 100003;
				height: 80vmin;
				image-rendering: pixelated;
			}
			.icon{
				font-family: "Press Start 2P";
				color: white;
				position: fixed;
				font-size: 2vmin;
				border: 0.625vmin solid white;
				padding: 0.625vmin;
				background: #333;
				display: inline-block;
				z-index: 100004;
				cursor: pointer;
			}
			.icon.selected{
				background: #bde317;
			}
			#game{
				display: none;
				position: fixed;
				top: -5vmin;
				left: -5vmin;
				width: 100vw;
				height: 100vh;
				transform: perspective(100vw) rotateX(0deg);
				transition: transform .4s;
				border: 5vmin solid #444;
				background: black;
			}
			#game.down{
				transform: perspective(100vw) translateY(75vh) rotateX(90deg);
			}
			#face{
				position: fixed;
				background: url("https://jchabin.github.io/femboyhooters/cutout.png");
				background-size: contain;
				background-repeat: no-repeat;
				background-position: center;
				right: 0;
				top: 0;
				width: 100vmin;
				height: 100vh;
				filter: brightness(0.6) contrast(5) grayscale(0.7);
			}
			.femboy{
				position: fixed;
				top: 0;
				left: 250vw;
				height: 100vh;
				z-index: 1;
			/* 	mix-blend-mode: lighten; */
			}
			@keyframes blink{
				0%{ visibility: visible; }
				50%{ visibility: hidden; }
				100%{ visibility: hidden; }
			}
			#error{
				position: fixed;
				right: 55vmin;
				bottom: 10vmin;
				font-family: "Press Start 2P";
				font-size: 4vmin;
				color: #f31;
				z-index: 100004;
				display: none;
				padding: 5vmin;
				text-shadow: 0 0 1vmin #f00;
				animation: blink 0.5s infinite;
			}
			.door{
				position: fixed;
				height: calc(2.5vmin + 2px);
				width: calc(2.5vmin + 2px);
				z-index: 100004;
				cursor: pointer;
				mix-blend-mode: lighten;
				transform: translate(1px, 1px);
			}
			.door.selected{
				background: #bde317;
			}
			#fight{
				display: none;
				position: fixed;
				top: 0;
				left: 0;
				width: 100vw;
				height: 100vh;
				background: black;
			}
			#gun{
				position: fixed;
				bottom: 0;
				right: 0;
				transform: scaleX(-1);
				height: 80vmin;
				z-index: -1;
			}
			.fighter{
				position: fixed;
				cursor: pointer;
				z-index: 0;
				height: 75vmin;
			}
			#gameover{
				position: fixed;
				top: 0;
				left: 0;
				width: 100vw;
				height: 100vh;
				background: black;
				color: #f31;
				font-size: 10vmin;
				text-align: center;
				vertical-align: middle;
				line-height: 100vh;
				font-family: "Press Start 2P";
				z-index: 100005;
				display: none;
				text-shadow: 0 0 3vmin #f00;
			}
			#night{
				background: black;
				color: white;
				font-family: "Roboto Mono";
				font-size: 10vmin;
				text-align: center;
				vertical-align: middle;
				line-height: 100vh;
				height: 100vh;
				width: 100vw;
				position: fixed;
				top: 0;
				left: 0;
				z-index: 100006;
				display: none;
			}
			#battery{
				position: fixed;
				top: 10vmin;
				right: 10vmin;
				color: white;
				font-family: "Press Start 2P";
				font-size: 4vmin;
				z-index: 100004;
			}
			#time{
				position: fixed;
				top: 10vmin;
				left: 10vmin;
				color: white;
				font-family: "Press Start 2P";
				font-size: 4vmin;
				z-index: 100004;
			}
			#screenoff{
				position: fixed;
				top: 0;
				left: 0;
				width: 100vw;
				height: 100vh;
				background: black;
				z-index: 100005;
				display: none;
			}
		</style>
	</head>
	<body>
		<div id="main">
			<div class="font" id="title">Five<br/>Nights<br/>At<br/>Femboy<br/>Hooters</div>
			<div class="font" id="start" onclick="start(0)">New Game</div>
			<div class="font" id="continue" onclick="start(parseInt(localStorage.fnafLevel))">Continue</div>
			<div id="face"></div>
			<div class="font" id="controls">
				SPACE - Flashlight<br/>
				MOUSE - Turn camera<br/>
				Change camera<br/>
				Lock door<br/>
				Fire gun
			</div>
			<div id="static"></div>
		</div>
		<div id="night">NIGHT 0</div>
		<div id="fight">
			<img id="gun" src="https://i.ya-webdesign.com/images/holding-gun-png-5.png" draggable="false">
		</div>
		<div id="game">
			<div id="screen"></div>
			<div id="flashlight" class="off"></div>
			<div id="static2"></div>
			<img id="map" draggable="false" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAEk0lEQVR4Xu2d4XLiMAyE4cmhT84NnbubQkkseSXHjr7+6gySLK3WayUEuF74K43AtXT1FH+BAMVJAAEgQHEEipePAkCA4ggULx8FgADFEShePgoAAYojULx8FAACFEegePkoAAQojkDx8lEACFAcgeLlowAQoDgCxctHASBAcQSKl48CQIDiCBQvHwWAAMURKF4+CgABiiNQvHwUAAIUR6B4+SgABCiOQPHyUQAIMDcCj8fjoWR4vV53SZ4dX8l9hO/0CvBsUKuJW0BZfC02SvwRTVTWgADJBFOaM8IXAkCAETzrXyNborPj91c+xhMFQAHGMK13lewdmh2/t+5RfigACjCKa33rZO/Q7Ph9VY/zQgFQgHFs61kpe4dmx++peaTPEgqgANK6i8itYAXdA33v9/vjfr9/E/jn/1EpZcePylONM70CbBWY3aDs+GrjovwhwAaSECCKYklxshuUHT8JFnfYVAXoGbDeh7aeGG4UBAc139aQKqRmck0ngKfAT5dkymWaCQHBSM13htqmI8DX19dLS26328VDIqGfbtdnA5V8IcAb5OqOcndQdFDzhQAQoPtxN5G7/905AgQkOQIa4HklTpVUoZddrmq+Xny6kmw4TacAny6rZh4CuQzcYZiX4eqOytghezG99Y3Oz7IeCmBBacMGAjADHD7FC/z9dkUBBARRABQABYgckhgCBTnqdOUI6ATu6cYRwBHAEcAR8Pr9A6OfX1BvknEEBB8BI4+FiLUgAAQQEGAG+DUDROxKa0ci1kIBrGh/sFPfDhaW/naFACqCov/R9y1OSQDlGTuxn253CMAMID0U6mbcm8MpFeAMD4So1+ZWYpySABwB1vYzBNqRSrJkBjDMAF7s1WfsvOup9kfnqx43qfcBVHA9/tkf5lTjq/4eLDy2EMCIltpA1d+YptsMAhghUxuo+hvTdJtBACNkagNVf2OabrPlCdB6/10dktT4LX93x94c1PpOQYAtECJulOzFsMS32PSSICI2BDBcyioEi2jSVooRsSEABOgVoDn8VIluVaHGj9ilKMBOl9QGQYAWApO/DgH2fxWt1T5mAGaAFkfmfh0FQAE2P50TMYCpBIvIgSGQIfAjAhHkYgZgBpj7jG9lp0p0dvyIXcoRwBHAEdCzCyJ2n6owETn01N5Stn+vMwMMmAGszeix4+3gnZ9923pqdw9oz+cSMnd3Dxl6fMopgFfSvfY9TTjSBwL8QN/7nD8KcCR1/67t3aHZ9hNA4koBBUABXISZzjh7R3vjTwdQIyEUAAVYjbOv+bZ2qOfTxs9YXnv1Ovxo9FEAFOBoDmrrtxRAvbHjja9VM9779ArglXSvPUfAeNK+rOjdodn2B8PhXv70CsARsM8JCMAQ6FaNqRyyJd0bfypwDMmcQgH26vR+h49qb8B8KpPlCTAVmgsmAwEWbFpkyhAgEs0FY0GABZsWmTIEiERzwVgQYMGmRaYMASLRXDAWBFiwaZEpQ4BINBeMBQEWbFpkyhAgEs0FY0GABZsWmTIEiERzwVgQYMGmRaYMASLRXDAWBFiwaZEp/wE2wGTbxTio4QAAAABJRU5ErkJggg==">
			<div id="mapicons">
				<div class="icon" style="right: 25vmin; bottom: 7vmin" onclick="select(0)">CAM<br/>01</div>
				<div class="icon" style="right: 47vmin; bottom: 20vmin" onclick="select(1)">CAM<br/>02</div>
				<div class="icon" style="right: 16vmin; bottom: 47vmin" onclick="select(2)">CAM<br/>03</div>
				<div class="icon" style="right: 61vmin; bottom: 30vmin" onclick="select(3)">CAM<br/>04</div>
				<div class="icon selected" style="right: 7vmin; bottom: 17vmin" onclick="select(4)">CAM<br/>05</div>
				<div class="icon" style="right: 48vmin; bottom: 39vmin" onclick="select(5)">CAM<br/>06</div>
				<div class="door" style="right: 21.25vmin; bottom: 30vmin" onclick="selectDoor(0)"></div>
				<div class="door" style="right: 31.25vmin; bottom: 30vmin" onclick="selectDoor(1)"></div>
				<div class="door" style="right: 46.25vmin; bottom: 30vmin" onclick="selectDoor(2)"></div>
				<div class="door" style="right: 35vmin; bottom: 13.125vmin" onclick="selectDoor(3)"></div>
				<div class="door" style="right: 42.5vmin; bottom: 13.125vmin" onclick="selectDoor(4)"></div>
				<div class="door" style="right: 55vmin; bottom: 33.75vmin" onclick="selectDoor(5)"></div>
				<div class="door" style="right: 55vmin; bottom: 46.25vmin" onclick="selectDoor(6)"></div>
				<div class="door" style="right: 48.75vmin; bottom: 50vmin" onclick="selectDoor(7)"></div>
				<div class="door" style="right: 33.75vmin; bottom: 50vmin" onclick="selectDoor(8)"></div>
				<div class="door" style="right: 27.5vmin; bottom: 35vmin" onclick="selectDoor(9)"></div>
				<div class="door" style="right: 27.5vmin; bottom: 46.25vmin" onclick="selectDoor(10)"></div>
			</div>
			<div id="error">&lt;VIDEO_ERROR&gt;</div>
			<div id="battery">100%_BATTERY</div>
			<div id="time">12 AM</div>
			<div id="screenoff"></div>
		</div>
		<div id="gameover">YOU DIED</div>
		<script>
		const NIGHTS = [
			[0, 3, 5, 2, 2],
			[0, 6, 8, 6, 8],
			[0, 12, 9, 3, 6],
			[3, 4, 15, 8, 13],
			[14, 17, 13, 13, 13]
		];
		
		if(localStorage.fnafLevel !== undefined)
			document.getElementById("continue").style.display = "block";
		
		var BATTERY = 100;
		
		var icons = document.getElementsByClassName("icon");
		var doors = document.getElementsByClassName("door");
		var selected = 0;
		var selectedDoor = -1;
		
		var night = 0;
		
		var enterRoom = new Audio("https://jchabin.github.io/femboyhooters/screaam.wav");
		var deathSound = new Audio("https://jchabin.github.io/femboyhooters/femboy_sound.wav");
		var gun = new Audio("https://jchabin.github.io/femboyhooters/gun.wav");
		var buzzing = new Audio("https://jchabin.github.io/femboyhooters/shortbuzzing.wav");
		buzzing.loop = true;
		
		var screen = document.getElementById("screen");
		
		var screenDown = false;
		
		var cameraOut = false;
		
		var fighting = [];
		
		var roundOver = false;
		
		var timeouts = [];
		
		var STATIC = 1;
		
		var screens = [
			"https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/f2bf94e5-95ab-4d2a-acfa-b84a490b8eba/df7h2c-fdda2398-f26e-43aa-8beb-19011329bc42.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcL2YyYmY5NGU1LTk1YWItNGQyYS1hY2ZhLWI4NGE0OTBiOGViYVwvZGY3aDJjLWZkZGEyMzk4LWYyNmUtNDNhYS04YmViLTE5MDExMzI5YmM0Mi5qcGcifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6ZmlsZS5kb3dubG9hZCJdfQ.A5TzctNzCWAmH7JeaYSVT7W99RZ9DVMRPMzdgyrzPsE",
			"https://i.ytimg.com/vi/nRgQfS7OgZM/maxresdefault.jpg",
			"https://mlblogssnaggingbaseballs.files.wordpress.com/2007/10/storage6.jpg",
			"https://images.fastcompany.net/image/upload/w_1280,f_auto,q_auto,fl_lossy/fc/3019758-poster-p-1-open-office-layouts-are-disrespectful-to-employees-and-lower-their-quality-of-work.jpg",
			"https://patch.com/img/cdn/users/119153/2013/07/raw/1bc241cba1e83fa9caebb2c7d7ec06ae.jpg",
			"https://1.bp.blogspot.com/-RdwocJsXhts/WEcMNnATYnI/AAAAAAAAAAs/h_RoOMc4QDEsih_P157XXdJO4_eKar4FACLcB/s1600/dark.jpg"
		];
		
		var angles = [0, 0, 0, 0, 0, 0];
		
		function move(f){
			if(Math.floor(Math.random() * 20) + 1 <= f.diff)
				if((f.path[f.pos].room != selected && f.path[f.pos + 1].room != selected) || screenDown || cameraOut)
					if(f.path[f.pos + 1].door != selectedDoor)
						f.pos++;
					else{
						doors[selectedDoor].style.display = "none";
						setTimeout(function(){ doors[selectedDoor].style.display = "block"; }, 100);
						BATTERY -= 1;
					}
				else if(Math.floor(Math.random() * 50) + 1 <= f.diff && f.path[f.pos + 1].door != selectedDoor){
					f.pos++;
					screen.style.backgroundImage = "none";
					document.getElementById("error").style.display = "block";
					for(var i = 0; i < femboys.length; i++)
						femboys[i].ref.style.display = "none";
					cameraOut = true;
					setTimeout(function(){
						cameraOut = false;
						select(selected);
						document.getElementById("error").style.display = "none";
					}, Math.random() * 5000 + 3000);
					selectDoor(-1);
				}
			if(f.pos == f.path.length - 1){
				screenDown = true;
				document.getElementById("game").className = "down";
				f.attack(f);
				selectDoor(-1);
				enterRoom.play();
			}else if(!roundOver)
				timeouts.push(setTimeout(f.move, Math.random() * 5000 + 2000, f));
		}
		
		var femboys = [
			{
				url: "https://jchabin.github.io/femboyhooters/femboy1.png",
				pos: 0,
				diff: 0,
				ref: document.createElement("IMG"),
				path: [
					{room: 69},
					{room: 69},
					{room: 5, t: "translate(-30vh, 10vh) scale(0.2)", door: 8},
					{room: 5, t: "translate(-20vh, 15vh) scale(0.4) scaleX(-1)"},
					{room: 0, t: "translate(-10vh, 20vh) scale(0.8)", door: 1},
					{room: 0, t: "translate(-30vh, 60vh) scale(2)"},
					{room: -1, door: 3}
				],
				move: move,
				speed: 1,
				attack: function(f){
					var aref = document.createElement("IMG");
					aref.src = f.url;
					aref.className = "fighter";
					aref.draggable = false;
					document.getElementById("fight").prepend(aref);
					
					aref.onmousedown = function(){ aref.dead = true; aref.outerHTML = ""; f.pos = 0; f.move(f); f.speed++; }
					
					aref.countdown = 15;
					
					function loop(){
						if(!(aref.dead || roundOver))
							timeouts.push(setTimeout(loop, 100 / f.speed));
						aref.style.top = (window.innerHeight - aref.clientHeight) * Math.random() + "px";
						aref.style.left = (window.innerWidth - aref.clientWidth) * Math.random() + "px";
						aref.style.transform = Math.random() < 0.5 ? "" : "scaleX(-1)";
						aref.style.filter = Math.random() < 0.5 ? "" : "invert(10)";
						if(aref.countdown-- <= 0)
							death();
					}
					
					loop();
				}
			},
			{
				url: "https://jchabin.github.io/femboyhooters/femboy2.png",
				pos: 0,
				diff: 0,
				ref: document.createElement("IMG"),
				path: [
					{room: 3, t: "translate(-20vh, 20vh) scale(0.7) scaleX(-1)"},
					{room: 3, t: "translate(-40vh, 50vh) scale(1.5)"},
					{room: 5, t: "translate(20vh,10vh)", door: 5},
					{room: 1, t: "translate(-40vh, 30vh) rotate(20deg) scale(0.6)", door: 2},
					{room: 1, t: "translate(-80vh, 30vh) rotate(20deg) scale(2) scaleX(-1)", door: 2},
					{room: -1, door: 4}
				],
				move: move,
				speed: 1,
				attack: function(f){
					var aref = document.createElement("IMG");
					aref.src = f.url;
					aref.className = "fighter";
					aref.draggable = false;
					document.getElementById("fight").prepend(aref);
					
					aref.onmousedown = function(){ aref.dead = true; aref.outerHTML = ""; f.pos = 0; f.move(f); f.speed++; }
					aref.xPos = Math.floor((window.innerWidth - aref.clientWidth) * Math.random());
					aref.direction = Math.floor(Math.random() * 2) * 2 - 1;
					
					aref.style.bottom = 0;
					
					aref.countdown = 100;
					
					function loop(){
						if(!(aref.dead || roundOver))
							requestAnimationFrame(loop);
						aref.style.transform = "scaleX(" + -aref.direction + ")";
						aref.xPos += aref.direction * 50 * f.speed;
						aref.style.left = aref.xPos + "px";
						if(aref.xPos > window.innerWidth - aref.clientWidth / 2)
							aref.direction = -1;
						if(aref.xPos <  -aref.clientWidth / 2)
							aref.direction = 1;
						if(aref.countdown-- <= 0)
							death();
					}
					
					loop();
				}
			},
			{
				url: "https://jchabin.github.io/femboyhooters/femboy3.png",
				pos: 0,
				diff: 0,
				ref: document.createElement("IMG"),
				path: [
					{room: 4, t: "translate(-3vh, 10vh) scale(0.4)"},
					{room: 4, t: "translate(-60vh, 30vh) scale(0.7) scaleX(-1)"},
					{room: 69, door: 0},
					{room: 69, door: 0},
					{room: 5, t: "translate(-20vh,10vh) scale(0.1)", door: 9, f: "brightness(0.2)"},
					{room: 2, t: "translate(0,120vh) scale(3)", door: 10},
					{room: 5, t: "translate(-20vh,10vh) scale(0.1) scaleX(-1)", door: 10, f: "brightness(0.2)"},
					{room: 0, t: "translate(-5vh, 30vh) scale(0.8)", door: 1},
					{room: -1, door: 3}
				],
				move: move,
				speed: 1,
				attack: function(f){
					var aref = document.createElement("IMG");
					aref.src = f.url;
					aref.className = "fighter";
					aref.draggable = false;
					document.getElementById("fight").prepend(aref);
					
					aref.onmousedown = function(){ aref.dead = true; aref.outerHTML = ""; f.pos = 0; f.move(f); f.speed++; }
					aref.angle = Math.random() * 2 * Math.PI;
					
					aref.countdown = 100;
					
					function loop(){
						if(!(aref.dead || roundOver))
							requestAnimationFrame(loop);
						aref.style.transform = "translate(-50%, -50%) rotate(" + aref.angle * -1 + "rad)";
						
						aref.style.left = window.innerWidth / 2 + Math.min(window.innerWidth, window.innerHeight) / 2 * Math.cos(aref.angle) + "px";
						aref.style.top = window.innerHeight / 2 + Math.min(window.innerWidth, window.innerHeight) / 2 * Math.sin(aref.angle) + "px";
						
						aref.angle += 0.05 * f.speed;
						
						if(aref.countdown-- <= 0)
							death();
					}
					
					loop();
				}
			},
			{
				url: "https://jchabin.github.io/femboyhooters/femboy4.png",
				pos: 0,
				diff: 0,
				ref: document.createElement("IMG"),
				path: [
					{room: 3, t: "translate(-30vh, 1vh) scale(0.3)"},
					{room: 5, t: "translate(-55vh, 70vh) scale(2)", door: 6},
					{room: 1, t: "translate(-32vh, 13vh) scale(0.4) rotate(20deg)", door: 2},
					{room: 1, t: "translate(-15vh, 25vh) scale(1.2) rotate(20deg) scaleX(-1)"},
					{room: 5, t: "translate(-55vh, 70vh) scale(2)", door: 2},
					{room: 0, t: "translate(3vh, 15vh) scale(0.7) scaleX(-1)", door: 1},
					{room: -1, door: 3}
				],
				move: move,
				speed: 1,
				attack: function(f){
					var aref = document.createElement("IMG");
					aref.src = f.url;
					aref.className = "fighter";
					aref.draggable = false;
					document.getElementById("fight").prepend(aref);
					
					aref.onmousedown = function(){ aref.dead = true; aref.outerHTML = ""; f.pos = 0; f.move(f); f.speed++; }
					
					aref.countdown = 15;
					
					function loop(){
						if(!(aref.dead || roundOver))
							timeouts.push(setTimeout(loop, 100 / f.speed));
						aref.style.top = (window.innerHeight - aref.clientHeight) * Math.random() + "px";
						aref.style.left = (window.innerWidth - aref.clientWidth) * Math.random() + "px";
						aref.style.transform = Math.random() < 0.5 ? "" : "scaleX(-1)";
						aref.style.filter = Math.random() < 0.5 ? "" : "invert(10)";
						if(aref.countdown-- <= 0)
							death();
					}
					
					loop();
				}
			},
			{
				url: "https://jchabin.github.io/femboyhooters/femboy5.png",
				pos: 0,
				diff: 0,
				ref: document.createElement("IMG"),
				path: [
					{room: 69},
					{room: 69},
					{room: 69},
					{room: 5, t: "translate(-30vh, 5vh) scale(0.7)", door: 7},
					{room: 3, t: "translate(10vh, 5vh) scale(0.8)", door: 3},
					{room: 3, t: "translate(-20vh, 50vh) scale(2)"},
					{room: 5, t: "translate(-40vh, -50vh) scale(0.5) rotate(180deg)", door: 5},
					{room: 1, t: "translate(-10vh, 28vh) scale(1.5) rotate(20deg)", door: 2},
					{room: -1, door: 4}
				],
				move: move,
				speed: 1,
				attack: function(f){
					var aref = document.createElement("IMG");
					aref.src = f.url;
					aref.className = "fighter";
					aref.draggable = false;
					document.getElementById("fight").prepend(aref);
					
					aref.onmousedown = function(){ aref.dead = true; aref.outerHTML = ""; f.pos = 0; f.move(f); f.speed++; }
					aref.xPos = Math.floor((window.innerWidth - aref.clientWidth) * Math.random());
					aref.direction = Math.floor(Math.random() * 2) * 2 - 1;
					
					aref.style.bottom = 0;
					
					aref.countdown = 100;
					
					function loop(){
						if(!(aref.dead || roundOver))
							requestAnimationFrame(loop);
						aref.style.transform = "scaleX(" + -aref.direction + ")";
						aref.xPos += aref.direction * 50 * f.speed;
						aref.style.left = aref.xPos + "px";
						if(aref.xPos > window.innerWidth - aref.clientWidth / 2)
							aref.direction = -1;
						if(aref.xPos <  -aref.clientWidth / 2)
							aref.direction = 1;
						if(aref.countdown-- <= 0)
							death();
					}
					
					loop();
				}
			}
		];
		
		for(var i = 0; i < femboys.length; i++){
			screen.appendChild(femboys[i].ref);
			femboys[i].ref.src = femboys[i].url;
			femboys[i].ref.className = "femboy";
		}
		
		document.getElementById("fight").onmousedown = function(){
			document.getElementById("fight").style.filter = "grayscale(1) invert(1) contrast(10000)";
			setTimeout(function(){
				document.getElementById("fight").style.filter = "";
			}, 100);
			gun.cloneNode().play();
		}
		
		function select(n){
			STATIC = 1;
			selected = n;
			for(var i = 0; i < icons.length; i++)
				icons[i].className = "icon" + (i == n ? " selected" : "")
			if(cameraOut)
				return;
			screen.style.backgroundImage = "url(\"" + screens[n] + "\")";
			for(var i = 0; i < femboys.length; i++){
				femboys[i].ref.style.transform = femboys[i].path[femboys[i].pos].t;
				femboys[i].ref.style.display = femboys[i].path[femboys[i].pos].room == n ? "" : "none";
				femboys[i].ref.style.zIndex = Math.floor(femboys[i].ref.getBoundingClientRect().bottom + 1);
				femboys[i].ref.style.filter = femboys[i].path[femboys[i].pos].f ?? "none";
			}
		}
		
		function selectDoor(n){
			if(selectedDoor == n)
				n = -1;
			selectedDoor = n;
			for(var i = 0; i < doors.length; i++)
				doors[i].className = "door" + (i == n ? " selected" : "")
		}
		
		var mouse = {x: 0, y: 0, down: false};
		
		window.onmousemove = function(e){
			mouse.x = e.clientX;
			mouse.y = e.clientY;
		}
		
		window.onmousedown = function(){
			mouse.down = true;
		}
		window.onmouseup = function(){
			mouse.down = false;
		}
			
		window.onkeydown = function(e){
			if(e.code == "Space")
				document.getElementById("flashlight").className = "";
		}
		
		window.onkeyup = function(e){
			if(e.code == "Space")
				document.getElementById("flashlight").className = "off";
		}
		
		var lastTime = 0;
		
		var dayTime = 0;
		
		function render(timeStamp){
			if(dayTime <= 60 * 1000 * 6 && !dead)
				requestAnimationFrame(render);
			else{
				roundOver = true;
				for(i in timeouts)
					clearTimeout(timeouts[i]);
				if(dead){
					setTimeout(function(){
						document.getElementById("gameover").style.display = "none";
						document.getElementById("main").style.display = "block";
					}, 2000);
				}else
					start(night + 1);
			}
			
			document.getElementById("static2").style.opacity = STATIC;
			STATIC = 0.2 * 0.2 + STATIC * 0.8;
			
			if(BATTERY <= 0){
				selectDoor(-1);
				screenDown = true;
				document.getElementById("game").className = "down";
				for(var i = 0; i < femboys.length; i++)
					femboys[i].diff = 20;
				document.getElementById("screenoff").style.display = "block";
			}
					
			if(lastTime == 0)
				lastTime = timeStamp;
			var warp = timeStamp - lastTime;
			lastTime = timeStamp;
			if(!(screenDown || cameraOut)){
				screen.style.transform = "translateX(" + angles[selected] + "vmax)";
				if(mouse.x < 10)
					angles[selected] = Math.min(12, angles[selected] + 0.3);
				if(mouse.x > window.innerWidth - 20)
					angles[selected] = Math.max(-12, angles[selected] - 0.3);
			}
			if(screenDown && document.getElementById("fight").children.length == 1 && BATTERY > 0){
				screenDown = false;
				document.getElementById("game").className = "";
				select(selected);
			}
			if(document.getElementById("flashlight").className != "off")
				BATTERY -= 0.0005 * warp;
			document.getElementById("battery").innerHTML = Math.round(BATTERY) + "%_BATTERY";
			dayTime += warp;
			var hour = Math.floor(dayTime / 1000 / 60);
			// var minute = Math.floor(60 * (dayTime / 1000 / 90 - hour)) + "";
			hour = (hour == 0 ? 12 : hour) + "";
			hour = hour.length < 2 ? "0" + hour : hour;
			// minute = minute.length < 2 ? "0" + minute : minute;
			document.getElementById("time").innerHTML = hour + " AM";
		}
		
		function start(n){
			// buzzing.play();
			localStorage.fnafLevel = n;
			document.getElementById("continue").style.display = "block";
			night = n;
			dayTime = 0;
			BATTERY = 100;
			selectDoor(-1);
			document.getElementById("main").style.display = "none";
			document.getElementById("game").style.display = "block";
			document.getElementById("fight").style.display = "block";
			document.getElementById("static").style.animation = "none";
			document.getElementById("screenoff").style.display = "none";
			document.getElementById("gameover").style.display = "none";
			screenDown = false;
			cameraOut = false;
			roundOver = false;
			dead = false;
			for(var i = 0; i < NIGHTS[n].length; i++){
				femboys[i].diff = NIGHTS[n][i];
				femboys[i].pos = 0;
				femboys[i].speed = 1;
			}
			document.getElementById("night").style.display = "block";
			document.getElementById("night").innerHTML = "NIGHT " + (n + 1);
			setTimeout(function(){
				document.getElementById("night").style.display = "none";
				select(0);
				requestAnimationFrame(render);
				for(var i = 0; i < femboys.length; i++)
					setTimeout(femboys[i].move, Math.random() * 5000 + 2000, femboys[i]);
			}, 1000);
		}
		
		var dead = false;
		
		function death(){
			document.getElementById("gameover").style.display = "block";
			dead = true;
			deathSound.play();
			document.getElementById("game").style.display = "none";
			document.getElementById("game").className = "";
			document.getElementById("fight").style.display = "none";
		}
		
		</script>
	</body>
  </html>
